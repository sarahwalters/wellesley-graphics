<!DOCTYPE html>
<!-- saved from url=(0057)http://cs.wellesley.edu/~cs307/threejs/demos/barn-tw.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Barn Demo</title>
    <link rel="stylesheet" type="text/css" href="./20160909_barn_files/307.css">
    <style>
      body { max-width: 100%; }
      /* feel free to style the canvas any way you want. If you want it to
      use the entire window, set width: 100% and height: 100%. */

      canvas {
          display: block;
          margin-left: 45%;
          width: 50%;
          height: 500px;
      }
    </style>
    <script src="http://cs.wellesley.edu/~cs307/threejs/libs/three-r80.js"></script>
    <script src="http://cs.wellesley.edu/~cs307/threejs/libs/OrbitControls.js"></script>
    <script src="http://cs.wellesley.edu/~cs307/threejs/libs/tw.js"></script>
  </head>
<body>

<h1>Barn Demo</h1>

<p>This file has the minimal code to create a working Three.js
  application, using the TW object to set up the camera for us.
  Because the canvas does not take the entire window, there is space for
  some ordinary HTML like this.

</p><div style="width: 40%; float: left">
<h2>GUI</h2>

<p>The TW <code>camera</code> method sets up a THREE.js Orbiting Camera
  (which we'll learn more about later) that lets you look at the scene
  from all sides.  You'll find it's pretty intuitive, but here's a brief
  listing of what the mouse will do:
  </p><ul>
    <li>The left mouse button will let you move the camera around the
    center of the scene, maintaining a constant distance.  For example,
    clicking and dragging several times from left to right will let you
    look at all the walls of the barn.  Similarly, dragging down a few
    times lets you look at the roof.
    </li><li>The right mouse button (control-click on a Mac) lets you move the
      scene horizontally and vertically.  This also changes the center of
      the scene, so that the left mouse button then rotates around a
      different point.
    </li><li>The scroll wheel will allow you to <q>dolly</q> the camera in
    (closer to the center of the scene) or out (farther away).
  </li></ul>

<p>If you don't like this GUI, we'll eventually learn how to do different
  actions, so stay tuned.

</p><h2>Keyboard Shortcuts</h2>

<p>The <code>TW.camera()</code> method also sets up some keyboard
  commands. You can find out what they are by using the "?" command. You
  may have to click on the canvas first, to put it in focus.
</p></div>

<script>
// We always need a scene.
var scene = new THREE.Scene();

// ====================================================================

/* Next, we create objects in our scene. Here, the <q>classic</q>
barn. The front left bottom vertex of the barn is the origin, so, for
example, the x coordinates go from 0 to 20. */

var barnWidth = 40;
var barnHeight = 30;
var barnDepth = 40;
var steepleWidth = 6;
var steepleHeight = 36;

var barnGeometry = TW.createBarn( barnWidth, barnHeight, barnDepth );
var steepleGeometry = createSteeple( steepleWidth, steepleHeight );

/* Returns a geometry object for a steeple, which is just a square pyramid
 * or tetrahedron.  The origin is in the center of the base, so the base
 * vertices are at y=0 and x and z at plus or minus half the width, and
 * the top is at (0,height,0) */

function createSteeple(width, height) {
    var geom = new THREE.Geometry();
    var w2 = 0.5*width;
    // add the base
    geom.vertices.push(new THREE.Vector3(+w2, 0, +w2));
    geom.vertices.push(new THREE.Vector3(+w2, 0, -w2));
    geom.vertices.push(new THREE.Vector3(-w2, 0, -w2));
    geom.vertices.push(new THREE.Vector3(-w2, 0, +w2));
    geom.vertices.push(new THREE.Vector3(0, height, 0));

    // now that we've got the vertices we need to define the faces.
    // base
    geom.faces.push(new THREE.Face3(0, 2, 1));
    geom.faces.push(new THREE.Face3(0, 3, 2));

    // side faces
    geom.faces.push(new THREE.Face3(0, 1, 4));
    geom.faces.push(new THREE.Face3(1, 2, 4));
    geom.faces.push(new THREE.Face3(2, 3, 4));
    geom.faces.push(new THREE.Face3(3, 0, 4));

    // calculate the normals for shading
    geom.computeFaceNormals();
    geom.computeVertexNormals(true);

    return geom;
}

// the createMesh function adds a "demo" material to the geometry

var barnMesh = TW.createMesh( barnGeometry );
var steepleMesh = TW.createMesh( steepleGeometry );
steepleMesh.position.set( barnWidth / 2, barnHeight + 0.5 * barnWidth - steepleWidth/2, -steepleWidth/2);

// the scene is the set of things to render, so add the barn.

scene.add(barnMesh);
scene.add(steepleMesh);

// ================================================================
//
// We always need a renderer

var renderer = new THREE.WebGLRenderer();

TW.mainInit(renderer,scene);

/* We always need a camera; here we'll use a default orbiting camera.  The
third argument are the ranges for the coordinates, to help with setting up
the placement of the camera. They need not be perfectly accurate, but if
they are way off, your camera might not see anything, and you'll get a
blank canvas. */

TW.cameraSetup(renderer,
               scene,
               {minx: 0, maxx: barnWidth,
                miny: 0, maxy: barnHeight, // a bit low
                minz: -barnDepth, maxz: 0});
</script><canvas width="742" height="500" style="width: 742px; height: 500px;"></canvas>



</body></html>
